<div class="flex flex-col h-full max-h-inherit overflow-hidden">
  <div
    class="absolute left-0 right-0 top-0 flex items-center pt-4 gap-4 px-4 z-10"
  >
    <ui-button
      class="h-10 {{
        data.image.nsfw() ? 'text-error-600 bg-white' : 'bg-white'
      }}"
      theme="custom"
      appearance="stroked"
      (onClick)="data.image.toggleNsfw()"
    >
      <ui-nsfw-toggle
        [value]="data.image.nsfw()"
        class="pointer-events-none"
      ></ui-nsfw-toggle>
      {{ data.image.nsfw() ? 'NSFW' : 'SFW' }}
    </ui-button>
    <ui-button
      class="h-10 bg-white"
      theme="custom"
      appearance="stroked"
      (onClick)="data.image.toggleFavorite()"
    >
      <ui-favorite-toggle
        [value]="data.image.favorite()"
        class="pointer-events-none"
      ></ui-favorite-toggle>
      {{ data.image.favorite() ? 'Favorited' : 'Favorite' }}
    </ui-button>
  </div>

  <pan-zoom
    [config]="panZoom"
    class="flex-auto"
    (mousedown)="onMouseDown($event)"
    (mouseup)="onMouseUp($event)"
  >
    <div class="w-full h-full flex items-center justify-center">
      <img
        class="w-auto h-auto max-h-full cursor-grab select-none"
        [src]="path()"
        alt=""
      />
    </div>
  </pan-zoom>

  @if (!data.image.id) {
  <div
    class="absolute left-0 bottom-0 right-0 flex px-4 items-center gap-4 pb-4 z-10"
  >
    <!--      <ui-button theme="custom" class="bg-primary-600 text-black h-12" (onClick)="onAddToGallery($event)">Add To Gallery</ui-button>-->
    <ui-button
      theme="custom"
      class="bg-primary-600 text-black h-12"
      (onClick)="onAddToGallery($event)"
      >Add To Gallery & Save To Folder</ui-button
    >
  </div>
  }

  <feature-image-details-pane
    [image]="data.image"
    [open]="isDetailsOpen()"
    [absolute]="true"
  ></feature-image-details-pane>
</div>
